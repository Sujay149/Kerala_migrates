(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1497:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},4489:(e,s,t)=>{Promise.resolve().then(t.bind(t,9464))},4783:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},9464:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(5155),l=t(2115),a=t(9685),i=t(7365),n=t(7168),d=t(8482),c=t(4783),o=t(1497),x=t(215),m=t(9946);let h=(0,m.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),u=(0,m.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var f=t(4616),j=t(4236),g=t(5111),p=t(6874),N=t.n(p),v=t(6671),y=t(6766);function b(){let[e,s]=(0,l.useState)(!1),[t,m]=(0,l.useState)([]),[p,b]=(0,l.useState)([]),[w,k]=(0,l.useState)([]),[A,S]=(0,l.useState)(!0),{user:Z,userProfile:R}=(0,j.A)();(0,l.useEffect)(()=>{if(!Z)return;S(!0);let e=(0,g.eX)(Z.uid,e=>{m(e),S(!1)}),s=(0,g.F5)(Z.uid,e=>{b(e)});return(async()=>{try{let e=await (0,g.Oc)(Z.uid);k(e)}catch(e){console.error("Error loading health records:",e);try{await (0,g.gJ)(Z.uid);let e=await (0,g.Oc)(Z.uid);k(e)}catch(e){console.error("Error creating sample record:",e),k([])}}})(),()=>{e(),s()}},[Z]);let M=t.reduce((e,s)=>e+(s.messages&&Array.isArray(s.messages)?s.messages.length:0),0),C=p.filter(e=>e.isActive).length,E=t.flatMap(e=>e.messages&&Array.isArray(e.messages)?e.messages.map(s=>({...s,sessionTitle:e.title})):[]).sort((e,s)=>{let t=e=>e instanceof Date?e.getTime()/1e3:e.seconds;return t(s.timestamp)-t(e.timestamp)}).slice(0,5),B=()=>{let e=50;return t.length>0&&(e+=20),p.length>0&&(e+=15),w.length>0&&(e+=15),Math.min(e,100)},W=async()=>{if(Z)try{await (0,g.gJ)(Z.uid),v.o.success("Sample health record created!");let e=await (0,g.Oc)(Z.uid);k(e)}catch(e){console.error("Error creating sample data:",e),v.o.error("Failed to create sample data")}};return(0,r.jsx)(i.q,{children:(0,r.jsxs)("div",{className:"flex h-screen bg-background text-foreground",children:[(0,r.jsx)(a.B,{isOpen:e,onClose:()=>s(!1)}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsx)("div",{className:"flex items-center justify-between p-4 border-b bg-card",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>s(!e),className:"lg:hidden text-muted-foreground h-10 w-10",children:(0,r.jsx)(c.A,{className:"h-5 w-5"})}),(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center overflow-hidden",children:(0,r.jsx)(y.default,{src:"/logo.png",alt:"Medibot Icon",width:29,height:29,className:"object-cover rounded-full"})}),(0,r.jsxs)("span",{className:"font-semibold text-foreground",children:[(null==R?void 0:R.displayName)||"User","'s Dashboard"]})]})}),(0,r.jsx)("div",{className:"flex-1 p-4 sm:p-6 overflow-y-auto",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 text-foreground",children:["Welcome back, ",(null==R?void 0:R.displayName)||"User","!"]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Here's your health overview for today"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(d.ZB,{className:"text-xs sm:text-sm font-medium text-foreground",children:"Chat Sessions"}),(0,r.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:t.length}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[M," total messages"]})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(d.ZB,{className:"text-xs sm:text-sm font-medium text-foreground",children:"Medications"}),(0,r.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:C}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:C>0?"Active medications":"No medications"})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(d.ZB,{className:"text-xs sm:text-sm font-medium text-foreground",children:"Health Score"}),(0,r.jsx)(h,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-green-500",children:B()}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:B()>=80?"Excellent":B()>=60?"Good":"Needs attention"})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(d.ZB,{className:"text-xs sm:text-sm font-medium text-foreground",children:"Health Records"}),(0,r.jsx)(u,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:w.length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:w.length>0?"Records tracked":"No records yet"})]})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{className:"text-xl font-semibold text-black dark:text-white",children:"Quick Actions"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(N(),{href:"/chat",children:(0,r.jsx)(n.$,{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white h-12",children:"Start New Chat"})}),(0,r.jsx)(N(),{href:"/medications",children:(0,r.jsx)(n.$,{variant:"outline",className:"w-full h-12 text-foreground",children:"Add Medication"})}),(0,r.jsx)(N(),{href:"/summarizer",children:(0,r.jsx)(n.$,{variant:"outline",className:"w-full h-12 text-foreground",children:"Search Medical Info"})}),(0,r.jsx)(N(),{href:"/appointments",children:(0,r.jsxs)(n.$,{onClick:W,variant:"outline",className:"w-full h-12 text-foreground",children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Appointments Record"]})})]})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{className:"text-xl font-semibold text-black dark:text-white",children:"Recent Activity"})}),(0,r.jsx)(d.Wu,{children:A?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-6 h-6 border-2 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading activity..."})]}):E.length>0?(0,r.jsx)("div",{className:"space-y-4",children:E.map((e,s)=>{var t,l;return(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full mt-2"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("span",{className:"text-sm text-foreground block truncate",children:e.message}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["in ",e.sessionTitle," â€¢ ",e.timestamp instanceof Date?e.timestamp.toLocaleDateString():(null===(l=e.timestamp)||void 0===l?void 0:null===(t=l.toDate())||void 0===t?void 0:t.toLocaleDateString())||"Recently"]})]})]},s)})}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(o.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-2",children:"No recent activity"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Start a conversation to see your activity here"}),(0,r.jsx)(N(),{href:"/chat",children:(0,r.jsx)(n.$,{className:"mt-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:"Start Your First Chat"})})]})})]})]})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,163,455,671,45,259,527,469,754,441,684,358],()=>s(4489)),_N_E=e.O()}]);